data={"AZUAY":{"Estudiante_code":13618,"Estudiante_relativo":162,"Promedio_global":7.63,"Matematica":7.49,"Lengua_Literatura":7.84,"Ciencias_Naturales":7.52,"Estudios_Sociales":7.69,"Institucion_code":185,"Fiscal":57.84,"Particular":29.19,"Fiscomisional":12.97,"Femenino":51.66,"Masculino":48.34,"Indice_socioeconomico":0.1568,"Discapacidad_SI":0.56,"Latitud":-3.0208356,"Longitud":-79.4339945},"BOLIVAR":{"Estudiante_code":3547,"Estudiante_relativo":172,"Promedio_global":7.72,"Matematica":7.55,"Lengua_Literatura":7.97,"Ciencias_Naturales":7.54,"Estudios_Sociales":7.82,"Institucion_code":72,"Fiscal":73.24,"Particular":7.04,"Fiscomisional":19.72,"Femenino":49.34,"Masculino":50.66,"Indice_socioeconomico":-0.6045,"Discapacidad_SI":0.48,"Latitud":-1.439637,"Longitud":-79.166474},"CARCHI":{"Estudiante_code":2773,"Estudiante_relativo":103,"Promedio_global":7.69,"Matematica":7.53,"Lengua_Literatura":7.9,"Ciencias_Naturales":7.59,"Estudios_Sociales":7.73,"Institucion_code":42,"Fiscal":80.49,"Particular":null,"Fiscomisional":19.51,"Femenino":49.22,"Masculino":50.78,"Indice_socioeconomico":-0.0009,"Discapacidad_SI":1.19,"Latitud":-2.511872,"Longitud":-79.116106},"CA\u00d1AR":{"Estudiante_code":3915,"Estudiante_relativo":214,"Promedio_global":7.62,"Matematica":7.51,"Lengua_Literatura":7.9,"Ciencias_Naturales":7.46,"Estudios_Sociales":7.59,"Institucion_code":57,"Fiscal":77.19,"Particular":14.04,"Fiscomisional":8.77,"Femenino":51.62,"Masculino":48.38,"Indice_socioeconomico":-0.1314,"Discapacidad_SI":0.51,"Latitud":0.847979,"Longitud":-78.12178},"CHIMBORAZO":{"Estudiante_code":7701,"Estudiante_relativo":150,"Promedio_global":7.6,"Matematica":7.54,"Lengua_Literatura":7.72,"Ciencias_Naturales":7.52,"Estudios_Sociales":7.6,"Institucion_code":146,"Fiscal":70.55,"Particular":18.49,"Fiscomisional":10.96,"Femenino":48.06,"Masculino":51.94,"Indice_socioeconomico":-0.2988,"Discapacidad_SI":0.36,"Latitud":-1.812013,"Longitud":-78.700816},"COTOPAXI":{"Estudiante_code":7766,"Estudiante_relativo":165,"Promedio_global":7.66,"Matematica":7.55,"Lengua_Literatura":7.85,"Ciencias_Naturales":7.49,"Estudios_Sociales":7.73,"Institucion_code":108,"Fiscal":66.36,"Particular":28.04,"Fiscomisional":5.61,"Femenino":48.34,"Masculino":51.66,"Indice_socioeconomico":-0.3357,"Discapacidad_SI":0.33,"Latitud":-0.727109,"Longitud":-78.88303},"EL ORO":{"Estudiante_code":11217,"Estudiante_relativo":162,"Promedio_global":7.55,"Matematica":7.34,"Lengua_Literatura":8.09,"Ciencias_Naturales":7.29,"Estudios_Sociales":7.49,"Institucion_code":133,"Fiscal":67.42,"Particular":25.0,"Fiscomisional":7.58,"Femenino":50.82,"Masculino":49.18,"Indice_socioeconomico":0.0953,"Discapacidad_SI":1.82,"Latitud":-3.394577,"Longitud":-79.731337},"ESMERALDAS":{"Estudiante_code":7500,"Estudiante_relativo":121,"Promedio_global":7.16,"Matematica":6.92,"Lengua_Literatura":7.64,"Ciencias_Naturales":6.95,"Estudios_Sociales":7.12,"Institucion_code":122,"Fiscal":72.13,"Particular":9.02,"Fiscomisional":18.85,"Femenino":54.44,"Masculino":45.56,"Indice_socioeconomico":-0.203,"Discapacidad_SI":1.41,"Latitud":0.572655,"Longitud":-79.320343},"GALAPAGOS":{"Estudiante_code":467,"Estudiante_relativo":151,"Promedio_global":7.52,"Matematica":7.16,"Lengua_Literatura":8.09,"Ciencias_Naturales":7.39,"Estudios_Sociales":7.45,"Institucion_code":9,"Fiscal":33.33,"Particular":33.33,"Fiscomisional":33.33,"Femenino":58.46,"Masculino":41.54,"Indice_socioeconomico":0.4445,"Discapacidad_SI":0.86,"Latitud":-0.731418,"Longitud":-91.03993},"GUAYAS":{"Estudiante_code":59987,"Estudiante_relativo":142,"Promedio_global":7.44,"Matematica":7.21,"Lengua_Literatura":7.99,"Ciencias_Naturales":7.19,"Estudios_Sociales":7.37,"Institucion_code":537,"Fiscal":45.9,"Particular":51.49,"Fiscomisional":2.61,"Femenino":52.27,"Masculino":47.73,"Indice_socioeconomico":0.1893,"Discapacidad_SI":1.03,"Latitud":-1.988169,"Longitud":-79.914278},"IMBABURA":{"Estudiante_code":7884,"Estudiante_relativo":172,"Promedio_global":7.74,"Matematica":7.61,"Lengua_Literatura":7.94,"Ciencias_Naturales":7.59,"Estudios_Sociales":7.82,"Institucion_code":101,"Fiscal":61.0,"Particular":29.0,"Fiscomisional":10.0,"Femenino":50.2,"Masculino":49.8,"Indice_socioeconomico":0.0635,"Discapacidad_SI":0.38,"Latitud":0.366153,"Longitud":-78.308043},"LOJA":{"Estudiante_code":8525,"Estudiante_relativo":168,"Promedio_global":7.68,"Matematica":7.49,"Lengua_Literatura":7.96,"Ciencias_Naturales":7.52,"Estudios_Sociales":7.73,"Institucion_code":153,"Fiscal":69.93,"Particular":11.76,"Fiscomisional":18.3,"Femenino":50.13,"Masculino":49.87,"Indice_socioeconomico":-0.1077,"Discapacidad_SI":0.49,"Latitud":-3.935048,"Longitud":-79.476238},"LOS RIOS":{"Estudiante_code":12656,"Estudiante_relativo":142,"Promedio_global":7.5,"Matematica":7.22,"Lengua_Literatura":8.05,"Ciencias_Naturales":7.25,"Estudios_Sociales":7.5,"Institucion_code":131,"Fiscal":69.23,"Particular":29.23,"Fiscomisional":1.54,"Femenino":49.94,"Masculino":50.06,"Indice_socioeconomico":-0.3317,"Discapacidad_SI":0.54,"Latitud":-1.520322,"Longitud":-79.553398},"MANABI":{"Estudiante_code":23512,"Estudiante_relativo":154,"Promedio_global":7.44,"Matematica":7.17,"Lengua_Literatura":7.97,"Ciencias_Naturales":7.2,"Estudios_Sociales":7.4,"Institucion_code":342,"Fiscal":62.83,"Particular":28.61,"Fiscomisional":8.55,"Femenino":50.22,"Masculino":49.78,"Indice_socioeconomico":-0.097,"Discapacidad_SI":1.12,"Latitud":-1.422974,"Longitud":-80.422472},"MORONA SANTIAGO":{"Estudiante_code":2589,"Estudiante_relativo":140,"Promedio_global":7.13,"Matematica":6.98,"Lengua_Literatura":7.25,"Ciencias_Naturales":7.12,"Estudios_Sociales":7.18,"Institucion_code":72,"Fiscal":74.65,"Particular":5.63,"Fiscomisional":19.72,"Femenino":49.02,"Masculino":50.98,"Indice_socioeconomico":-0.5046,"Discapacidad_SI":0.23,"Latitud":-2.180575,"Longitud":-78.169586},"NAPO":{"Estudiante_code":2295,"Estudiante_relativo":182,"Promedio_global":7.19,"Matematica":7.05,"Lengua_Literatura":7.27,"Ciencias_Naturales":7.16,"Estudios_Sociales":7.27,"Institucion_code":50,"Fiscal":68.0,"Particular":4.0,"Fiscomisional":28.0,"Femenino":49.41,"Masculino":50.59,"Indice_socioeconomico":-0.5461,"Discapacidad_SI":0.57,"Latitud":-0.965843,"Longitud":-77.942501},"ORELLANA":{"Estudiante_code":2780,"Estudiante_relativo":178,"Promedio_global":6.98,"Matematica":6.78,"Lengua_Literatura":7.13,"Ciencias_Naturales":6.92,"Estudios_Sociales":7.07,"Institucion_code":51,"Fiscal":82.35,"Particular":7.84,"Fiscomisional":9.8,"Femenino":50.14,"Masculino":49.86,"Indice_socioeconomico":-0.6265,"Discapacidad_SI":0.22,"Latitud":-0.701961,"Longitud":-76.764112},"PASTAZA":{"Estudiante_code":1694,"Estudiante_relativo":160,"Promedio_global":7.41,"Matematica":7.24,"Lengua_Literatura":7.58,"Ciencias_Naturales":7.33,"Estudios_Sociales":7.5,"Institucion_code":39,"Fiscal":61.54,"Particular":17.95,"Fiscomisional":20.51,"Femenino":53.48,"Masculino":46.52,"Indice_socioeconomico":-0.2374,"Discapacidad_SI":0.41,"Latitud":-1.444456,"Longitud":-77.193733},"PICHINCHA":{"Estudiante_code":46014,"Estudiante_relativo":150,"Promedio_global":7.74,"Matematica":7.58,"Lengua_Literatura":7.98,"Ciencias_Naturales":7.58,"Estudios_Sociales":7.8,"Institucion_code":603,"Fiscal":32.7,"Particular":60.59,"Fiscomisional":6.71,"Femenino":51.09,"Masculino":48.91,"Indice_socioeconomico":0.4487,"Discapacidad_SI":0.47,"Latitud":0.021973,"Longitud":-78.692717},"SANTA ELENA":{"Estudiante_code":5125,"Estudiante_relativo":136,"Promedio_global":7.25,"Matematica":7.0,"Lengua_Literatura":7.78,"Ciencias_Naturales":6.99,"Estudios_Sociales":7.21,"Institucion_code":52,"Fiscal":54.0,"Particular":40.0,"Fiscomisional":6.0,"Femenino":49.0,"Masculino":51.0,"Indice_socioeconomico":-0.0658,"Discapacidad_SI":1.17,"Latitud":-2.187523,"Longitud":-80.532202},"SANTO DOMINGO DE LOS TSACHILAS":{"Estudiante_code":8734,"Estudiante_relativo":200,"Promedio_global":7.33,"Matematica":7.09,"Lengua_Literatura":7.86,"Ciencias_Naturales":7.09,"Estudios_Sociales":7.27,"Institucion_code":105,"Fiscal":53.33,"Particular":39.05,"Fiscomisional":7.62,"Femenino":51.73,"Masculino":48.27,"Indice_socioeconomico":0.0237,"Discapacidad_SI":0.96,"Latitud":-0.277667,"Longitud":-79.223162},"SUCUMBIOS":{"Estudiante_code":3001,"Estudiante_relativo":139,"Promedio_global":7.15,"Matematica":6.88,"Lengua_Literatura":7.38,"Ciencias_Naturales":7.07,"Estudios_Sociales":7.28,"Institucion_code":78,"Fiscal":55.13,"Particular":11.54,"Fiscomisional":33.33,"Femenino":53.22,"Masculino":46.78,"Indice_socioeconomico":-0.5219,"Discapacidad_SI":0.6,"Latitud":-0.112784,"Longitud":-76.328354},"TUNGURAHUA":{"Estudiante_code":8874,"Estudiante_relativo":155,"Promedio_global":7.85,"Matematica":7.84,"Lengua_Literatura":7.97,"Ciencias_Naturales":7.66,"Estudios_Sociales":7.91,"Institucion_code":107,"Fiscal":64.49,"Particular":28.97,"Fiscomisional":6.54,"Femenino":49.46,"Masculino":50.54,"Indice_socioeconomico":0.0985,"Discapacidad_SI":0.37,"Latitud":-1.387013,"Longitud":-78.2716},"ZAMORA CHINCHIPE":{"Estudiante_code":2086,"Estudiante_relativo":184,"Promedio_global":7.42,"Matematica":7.27,"Lengua_Literatura":7.58,"Ciencias_Naturales":7.32,"Estudios_Sociales":7.49,"Institucion_code":32,"Fiscal":84.38,"Particular":null,"Fiscomisional":15.62,"Femenino":53.98,"Masculino":46.02,"Indice_socioeconomico":-0.438,"Discapacidad_SI":0.38,"Latitud":-4.13535,"Longitud":-78.875392},"ZONA NO DELIMITADA":{"Estudiante_code":357,"Estudiante_relativo":90,"Promedio_global":7.58,"Matematica":7.33,"Lengua_Literatura":8.07,"Ciencias_Naturales":7.41,"Estudios_Sociales":7.51,"Institucion_code":7,"Fiscal":100.0,"Particular":null,"Fiscomisional":null,"Femenino":53.22,"Masculino":46.78,"Indice_socioeconomico":-0.6234,"Discapacidad_SI":0.84,"Latitud":null,"Longitud":null}}

maps = {
  "2017_mat": '<iframe width="100%" height="520" frameborder="0" src="https://pabloestradac.carto.com/builder/c2b180bd-7caa-4197-ac6c-dcd462c86116/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',
  "2017_glob": '<iframe width="100%" height="520" frameborder="0" src="https://jananval.carto.com/builder/ae3f9ba0-7faa-47f5-9d70-719396740228/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',
  "2017_cc": '<iframe width="100%" height="520" frameborder="0" src="https://pabloestradac.carto.com/builder/f7fc576a-c5c7-4f6c-876c-810c94bea9db/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',
  "2017_cn": '<iframe width="100%" height="520" frameborder="0" src="https://jananval.carto.com/builder/5a6f1a6f-46a4-436a-a45a-12958170eb2a/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',
  "2017_ll": '<iframe width="100%" height="520" frameborder="0" src="https://pabloestradac.carto.com/builder/3883d32f-1bb4-464a-ae0a-c30a43150b84/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',
  "2017_ic": '<iframe width="100%" height="520" frameborder="0" src="https://jananval.carto.com/builder/a86b5ee1-81b1-4ca1-a040-729cf408b2af/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>'
}



$(document).ready(function() {

  ic_data =[]
  ic_prov =[]
  materia = ""
  for (var key in data){
    prov = data[key]
    ic_prov.push(key.slice(0,12));
    ic_data.push(prov["Indice_socioeconomico"]);
  }
  $("#bubble_graph").empty();
  Highcharts.chart('bubble_graph', {
      chart: {
          type: 'column'
      },
      title: {
          text: 'Indice Socioeconomico Promedio de Estudiantes'
      },
      xAxis: {
          categories: ic_prov,

          labels: {
              rotation: 90
          }
      },
      yAxis: {
        title: {
          text: 'Indice Socioeconomico'
        }
      },
      credits: {
          enabled: false
      },
      series: [{
          name: 'Provincias',
          data: ic_data
      }
      ]
  });

  $("#ic").on("click", function(){
    $("#promediodrop").text($(this).text());
    $("#mapa_carto").empty()
    $("#mapa_carto").html(
      maps["2017_ic"]
    );

    ic_data =[]
    ic_prov =[]
    materia = ""
    for (var key in data){
      prov = data[key]
      ic_prov.push(key.slice(0,12));
      ic_data.push(prov["Indice_socioeconomico"]);
    }
    $("#bubble_graph").empty();
    Highcharts.chart('bubble_graph', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Indice Socioeconomico Promedio de Estudiantes'
        },
        xAxis: {
            categories: ic_prov,

            labels: {
                rotation: 90
            }
        },
      	yAxis: {
        	title: {
          	text: 'Indice Socioeconomico'
        	}
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Provincias',
            data: ic_data
        }
        ]
    });
  })

  $(".map_cal").on("click", function(){
    $("#bubble_graph").empty();
    $("#promediodrop").text($(this).text());
    mapa = "2017"  + "_" +  $(this).attr("id");
    $("#mapa_carto").empty()
    $("#mapa_carto").html(
      maps[mapa]
    )
    my_data = []
    bubble_d = [        {x: 7.4862424732, y: 0.1568459759, z: 2.7236, name: "AZU", country: "AZUAY"},
            {x: 7.546504088, y: -0.6045321145, z: 0.7094, name: "BOL", country: "BOLIVAR"},
            {x: 7.5258564731, y: -0.0008933429, z: 0.5546, name: "CAR", country: "CARCHI"},
            {x: 7.5081072797, y: -0.1314087791, z: 0.783, name: "CAÑ", country: "CAÑAR"}
    ]
    bubble_data =[]
    materia = ""
    values_x = []
    values_y = []
    for (var key in data){
      prov = data[key]
      if ($(this).attr("id") == "mat"){
        materia = "Matematicas";
        values_x.push(prov["Matematica"]);
        values_y.push(prov["Indice_socioeconomico"]);
        bubble_data.push({
          x: prov["Matematica"],
          y: prov["Indice_socioeconomico"],
          z: prov["Estudiante_code"],
          name: key.toUpperCase().slice(0,5),
          country: key
        });
        my_data.push({
          marker: {
              radius: 3,
              symbol: "circle",
              fillColor: '#009688'
          },
          name: key,
          data: [[
            prov["Matematica"],
            prov["Indice_socioeconomico"]
          ]]
        })
      }
      else if ($(this).attr("id") == "cn"){
        materia = "Ciencias Naturales"
        values_x.push(prov["Ciencias_Naturales"]);
        values_y.push(prov["Indice_socioeconomico"]);
        bubble_data.push({
          x: prov["Ciencias_Naturales"],
          y: prov["Indice_socioeconomico"],
          z: prov["Estudiante_code"],
          name: key.toUpperCase().slice(0,3),
          country: key
        });
        my_data.push({
          marker: {
              radius: 3,
              symbol: "circle",
              fillColor: '#3F51B5'
          },
          name: key,
          data: [[
            prov["Ciencias_Naturales"],
            prov["Indice_socioeconomico"]
          ]]
        })
      }
      else if ($(this).attr("id") == "cc"){
        materia = "Estudios Sociales"
        values_x.push(prov["Estudios_Sociales"]);
        values_y.push(prov["Indice_socioeconomico"]);
        bubble_data.push({
          x: prov["Estudios_Sociales"],
          y: prov["Indice_socioeconomico"],
          z: prov["Estudiante_code"],
          name: key.toUpperCase().slice(0,3),
          country: key
        });
        my_data.push({
          marker: {
              radius: 3,
              symbol: "circle",
              fillColor: '#FFC107'
          },
          name: key,
          data: [[
            prov["Estudios_Sociales"],
            prov["Indice_socioeconomico"]
          ]]
        })
      }
      else if ($(this).attr("id") == "glob"){
        materia = "Global"
        values_x.push(prov["Promedio_global"]);
        values_y.push(prov["Indice_socioeconomico"]);
        bubble_data.push({
          x: prov["Promedio_global"],
          y: prov["Indice_socioeconomico"],
          z: prov["Estudiante_code"],
          name: key.toUpperCase().slice(0,3),
          country: key
        });
        my_data.push({
          marker: {
              radius: 3,
              symbol: "circle",
              fillColor: '#4CAF50'
          },
          name: key,
          data: [[
            prov["Promedio_global"],
            prov["Indice_socioeconomico"]
          ]]
        })
      }
      else {
        materia = "Lengua y Literatura"
        values_x.push(prov["Lengua_Literatura"]);
        values_y.push(prov["Indice_socioeconomico"]);
        bubble_data.push({
          x: prov["Lengua_Literatura"],
          y: prov["Indice_socioeconomico"],
          z: prov["Estudiante_code"],
          name: key.toUpperCase().slice(0,3),
          country: key
        });
        my_data.push({
          marker: {
              radius: 3,
              symbol: "circle",
              fillColor: '#FF5722'
          },
          name: key,
          data: [[
            prov["Lengua_Literatura"],
            prov["Indice_socioeconomico"]
          ]]
        })
      }
    }
    coef = linearRegression(values_x, values_y)["correlation"];
    console.log(coef)
    reg = findLineByLeastSquares(values_x, values_y);
    regx = reg[0]
    regy = reg[1]
    first_val_x = regx[indexOfSmallest(regx)]
    first_val_y = regy[indexOfSmallest(regx)]
    last_val_x = regx[indexOfMaxium(regy)]
    last_val_y = regy[indexOfMaxium(regy)]
    Highcharts.chart('bubble_graph', {

        chart: {
            type: 'bubble',
            plotBorderWidth: 1,
            zoomType: 'xy'
        },

        legend: {
            enabled: false
        },

        title: {
            text: 'Promedio vs Indice Socioeconomico de cada Provincia del Ecuador'
        },

        subtitle: {
            text: 'Source: <a href="http://www.euromonitor.com/">Datos libres</a> and <a href="https://data.oecd.org/">OECD</a>'
        },

        xAxis: {
            gridLineWidth: 1,
            title: {
                text: 'Promedio'
            },
            labels: {
                format: '{value}'
            },
            plotLines: [{
                color: 'black',
                dashStyle: 'dot',
                width: 2,
                value: 7,
                label: {
                    rotation: 0,
                    y: 15,
                    style: {
                        fontStyle: 'italic'
                    },
                    text: 'Promedio Minimo'
                },
                zIndex: 3
            }]
        },

        yAxis: {
            startOnTick: false,
            endOnTick: false,
            title: {
                text: 'Indice Socioeconomico'
            },
            labels: {
                format: '{value}'
            },
            maxPadding: 0.2,
            plotLines: [{
                color: 'black',
                dashStyle: 'dot',
                width: 2,
                value: 50,
                label: {
                    align: 'right',
                    style: {
                        fontStyle: 'italic'
                    },
                    text: 'Safe sugar intake 50g/day',
                    x: -10
                },
                zIndex: 3
            }]
        },

        tooltip: {
            useHTML: true,
            headerFormat: '<table>',
            pointFormat: '<tr><th colspan="2"><h3>{point.country}</h3></th></tr>' +
                '<tr><th>Promedio:</th><td>{point.x}</td></tr>' +
                '<tr><th>Indice Socioeconomico:</th><td>{point.y}</td></tr>' +
                '<tr><th>Numero de Estudiantes:</th><td>{point.z}</td></tr>',
            footerFormat: '</table>',
            followPointer: true
        },

        plotOptions: {
            series: {
                dataLabels: {
                    enabled: true,
                    format: '{point.name}'
                }
            }
        },

        series: [{
            data: bubble_data
        },{
        type: 'line',
        name: 'Regression Line',
        dataLabels: {
          enabled: true,
          format: 'r: ' + coef.toString().slice(0,5),
          allowOverlap: true,
          borderColor: "#FFFFFF",
          color: "#B71C1C"
        },
        data: [[first_val_x, first_val_y], [last_val_x, last_val_y]],
        color: '#B71C1C',
        dashStyle: "Dash",
        marker: {
            enabled: false
        },
        states: {
            hover: {
                lineWidth: 0
            }
        },
        enableMouseTracking: false
    }]
    });
  });

	$("#sel1").on("change", function(){



    provincia = $(this).val();
    for (var key in data){
      prov = data[key];
      if (key.toLowerCase() == provincia.toLowerCase()){
        $("#fisc1").text(prov["Fiscal"] + "%");
        $("#priv1").text(prov["Particular"] + "%");
        $("#socmun1").text(prov["Fiscomisional"] + "%");

        $("#estabs1").text(prov["Estudiante_code"]);
        $("#estrel1").text(prov["Estudiante_relativo"]);

        $("#masc1").text(prov["Masculino"] + "%");
        $("#fem1").text(prov["Femenino"] + "%");

        $("#disc1").text(prov["Discapacidad_SI"] + "%");

        $("#indicestr1").text(prov["Indice_socioeconomico"]);
        $("#indicevalor1").text(prov["Indice_socioeconomico"]);

        $("#glob1").text(prov["Promedio_global"]);
        $("#cn1").text(prov["Ciencias_Naturales"]);
        $("#ll1").text(prov["Lengua_Literatura"]);
        $("#cs1").text(prov["Estudios_Sociales"]);
        $("#mat1").text(prov["Matematica"]);

        $(".text_info").addClass("animated fadeIn");
        setTimeout(function(){
          $(".text_info").removeClass("animated fadeIn");
        }, 500)
      }
    }
  })

});

function findLineByLeastSquares(values_x, values_y) {
    var sum_x = 0;
    var sum_y = 0;
    var sum_xy = 0;
    var sum_xx = 0;
    var count = 0;

    /*
     * We'll use those variables for faster read/write access.
     */
    var x = 0;
    var y = 0;
    var values_length = values_x.length;

    if (values_length != values_y.length) {
        throw new Error('The parameters values_x and values_y need to have same size!');
    }

    /*
     * Nothing to do.
     */
    if (values_length === 0) {
        return [ [], [] ];
    }

    /*
     * Calculate the sum for each of the parts necessary.
     */
    for (var v = 0; v < values_length; v++) {
        x = values_x[v];
        y = values_y[v];
        sum_x += x;
        sum_y += y;
        sum_xx += x*x;
        sum_xy += x*y;
        count++;
    }

    /*
     * Calculate m and b for the formular:
     * y = x * m + b
     */
    var m = (count*sum_xy - sum_x*sum_y) / (count*sum_xx - sum_x*sum_x);
    var b = (sum_y/count) - (m*sum_x)/count;

    /*
     * We will make the x and y result line now
     */
    var result_values_x = [];
    var result_values_y = [];

    for (var v = 0; v < values_length; v++) {
        x = values_x[v];
        y = x * m + b;
        result_values_x.push(x);
        result_values_y.push(y);
    }

    return [result_values_x, result_values_y];
}

function indexOfSmallest(a) {
 var lowest = 0;
 for (var i = 1; i < a.length; i++) {
  if (a[i] < a[lowest]) lowest = i;
 }
 return lowest;
}

function indexOfMaxium(a) {
 var lowest = 0;
 for (var i = 1; i < a.length; i++) {
  if (a[i] > a[lowest]) lowest = i;
 }
 return lowest;
}

function linearRegression(x, y)
{
    var xs = 0;  // sum(x)
    var ys = 0;  // sum(y)
    var xxs = 0; // sum(x*x)
    var xys = 0; // sum(x*y)
    var yys = 0; // sum(y*y)

    var n = 0;
    for (; n < x.length && n < y.length; n++)
    {
        xs += x[n];
        ys += y[n];
        xxs += x[n] * x[n];
        xys += x[n] * y[n];
        yys += y[n] * y[n];
    }

    var div = n * xxs - xs * xs;
    var gain = (n * xys - xs * ys) / div;
    var offset = (ys * xxs - xs * xys) / div;
    var correlation = Math.abs((xys * n - xs * ys) / Math.sqrt((xxs * n - xs * xs) * (yys * n - ys * ys)));

    return { gain: gain, offset: offset, correlation: correlation };
}
